<% layout("/layouts/boilerplate")%>
<body>
    <br/>
    <h3 style="text-align: center; font-weight: 600;">Create Listing</h3>
    <div class="row">
        <div class="col-8  offset-2">
    <form method="POST" action="/listings" novalidate class="needs-validation" enctype="multipart/form-data">
        <div class="mb-3">
            <label for="name" class="form-label">Name</label>
            <input name="listing[name]" placeholder="Enter Name" type="text" class="form-control" required>
            <div class="invalid-feedback">
                Enter Valid Name
              </div>
        </div>
        <div class="mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea name="listing[description]" placeholder="Enter the Description" class="form-control" required></textarea>
            <div class="invalid-feedback">
                Enter Short Description
              </div>
        </div>
        <div class="mb-3">
            <label for="price" class="form-label">Price</label>
            <input name="listing[price]" placeholder="Enter Price"  class="form-control" required>
            <div class="invalid-feedback">
                Enter Price
              </div>
        </div>

       <div class="mb-3">
        <label for="image" class="form-label">Upload Listing Image</label>
        <input name="listing[images]"  type="file" class="form-control" multiple required/>
      </div>


       <div class="row">
        <div class="mb-3 col-md-4">
            <!-- <label for="category" class="form-label">Category</label>
            <input name="listing[category]" placeholder="Enter Men OR Women" type="text" class="form-control" required> -->
            <div class="mb-3">
                <label class="form-label">Category</label><br>
                <div id="category-buttons">
                    <button type="button" class="btn btn-outline-dark category-btn" data-category="Men">Men</button>
                    <button type="button" class="btn btn-outline-dark category-btn" data-category="Women">Women</button>
                </div>
                <input type="hidden" name="listing[category]" id="category-input" required>
                <div class="invalid-feedback">Select a category</div>
            </div>
            
            <div class="invalid-feedback">
                Enter Category
              </div>
       </div>
       <div class="mb-3 col-md-8">
            <!-- <label for="subCategory" class="form-label">SubCategory</label>
            <input name="listing[subCategory]" placeholder="Enter SubCategory" type="text" class="form-control" required> -->
            <div class="mb-3">
                <label class="form-label">SubCategory</label>
                <select name="listing[subCategory]" class="form-select" required>
                    <option value="" disabled selected>Select SubCategory</option>
                    <option value="Shirt">Shirt</option>
                    <option value="Pant">Pant</option>
                    <option value="T-Shirt">T-Shirt</option>
                    <option value="Others">Others</option>
                </select>
                <div class="invalid-feedback">Select a subcategory</div>
            </div>
            
            <div class="invalid-feedback">
                Enter SubCategory
              </div>
       </div>
       </div>
       
       <div class="mb-3">
            <label for="date" class="form-label">Date</label>
            <input name="listing[date]" placeholder="Enter Date" type="date" class="form-control" required>
            <div class="invalid-feedback">
                Select Date
              </div>
       </div>
        <div class="mb-3">
            <!-- <label for="sizes" class="form-label">Sizes</label>
            <input name="listing[sizes]" placeholder="Sizes S, M, L, XL" type="text" class="form-control" required> -->
            <div class="mb-3">
                <label class="form-label">Sizes</label><br>
                <div id="size-buttons">
                    <button type="button" class="btn btn-outline-dark size-btn" data-size="S">S</button>
                    <button type="button" class="btn btn-outline-dark size-btn" data-size="M">M</button>
                    <button type="button" class="btn btn-outline-dark size-btn" data-size="L">L</button>
                    <button type="button" class="btn btn-outline-dark size-btn" data-size="XL">XL</button>
                </div>
                <input type="hidden" name="listing[sizes]" id="size-input" required>
                <div class="invalid-feedback">Select at least one size</div>
            </div>
            
            <div class="invalid-feedback">
                Enter Sizes
              </div>
        </div>
        <br/>
        <button class="btn btn-dark all-btn mb-3">Add</button>
        <br/>


    </form>
</div>
</div>
    
<script>
    document.addEventListener("DOMContentLoaded", function () {
        let selectedSizes = [];
        const sizeButtons = document.querySelectorAll(".size-btn");
        const sizeInput = document.getElementById("size-input");
    
        sizeButtons.forEach(button => {
            button.addEventListener("click", function () {
                let size = this.getAttribute("data-size");
    
                // Toggle selection
                if (selectedSizes.includes(size)) {
                    selectedSizes = selectedSizes.filter(s => s !== size);
                    this.classList.remove("btn-dark");
                    this.classList.add("btn-outline-dark");
                } else {
                    selectedSizes.push(size);
                    this.classList.add("btn-dark");
                    this.classList.remove("btn-outline-dark");
                }
    
                // Update hidden input
                sizeInput.value = JSON.stringify(selectedSizes);
            });
        });
    });
    </script>
    

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let selectedCategory = "";
            const categoryButtons = document.querySelectorAll(".category-btn");
            const categoryInput = document.getElementById("category-input");
        
            categoryButtons.forEach(button => {
                button.addEventListener("click", function () {
                    // Remove selected style from all buttons
                    categoryButtons.forEach(btn => btn.classList.remove("btn-dark"));
                    categoryButtons.forEach(btn => btn.classList.add("btn-outline-dark"));
        
                    // Set selected category
                    selectedCategory = this.getAttribute("data-category");
                    categoryInput.value = selectedCategory;
        
                    // Highlight selected button
                    this.classList.add("btn-dark");
                    this.classList.remove("btn-outline-dark");
                });
            });
        });
        </script>
        